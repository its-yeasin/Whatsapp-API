### WhatsApp API Backend - Test Requests
### Use with REST Client extension in VS Code

@baseUrl = http://localhost:3000
@apiKey = your_api_key_here

### Health Check
GET {{baseUrl}}/health

### Root Endpoint
GET {{baseUrl}}/

### Send Single Message
POST {{baseUrl}}/api/messages/send
Content-Type: application/json
X-API-Key: {{apiKey}}

{
  "phoneNumber": "+1234567890",
  "message": "Hello from API test!"
}

### Send Bulk Messages
POST {{baseUrl}}/api/messages/send-bulk
Content-Type: application/json
X-API-Key: {{apiKey}}

{
  "messages": [
    {
      "phoneNumber": "+1234567890",
      "message": "Hello User 1!"
    },
    {
      "phoneNumber": "+9876543210",
      "message": "Hello User 2!"
    },
    {
      "phoneNumber": "+1112223333",
      "message": "Hello User 3!"
    }
  ]
}

### Get All Messages
GET {{baseUrl}}/api/messages?limit=20
X-API-Key: {{apiKey}}

### Get Messages by Status (pending)
GET {{baseUrl}}/api/messages?status=pending&limit=10
X-API-Key: {{apiKey}}

### Get Messages by Status (sent)
GET {{baseUrl}}/api/messages?status=sent&limit=10
X-API-Key: {{apiKey}}

### Get Specific Message Status
@messageId = -NvXyZ123456
GET {{baseUrl}}/api/messages/{{messageId}}
X-API-Key: {{apiKey}}

### Delete Message
@deleteMessageId = -NvXyZ123456
DELETE {{baseUrl}}/api/messages/{{deleteMessageId}}
X-API-Key: {{apiKey}}

### Cleanup Old Messages (7 days)
POST {{baseUrl}}/api/messages/cleanup
Content-Type: application/json
X-API-Key: {{apiKey}}

{
  "daysOld": 7
}

### Get Overall Statistics
GET {{baseUrl}}/api/stats
X-API-Key: {{apiKey}}

### Get Recent Statistics (Last 24 hours)
GET {{baseUrl}}/api/stats/recent
X-API-Key: {{apiKey}}

### Test Invalid Phone Number (should fail validation)
POST {{baseUrl}}/api/messages/send
Content-Type: application/json
X-API-Key: {{apiKey}}

{
  "phoneNumber": "123",
  "message": "This should fail"
}

### Test Missing Message (should fail validation)
POST {{baseUrl}}/api/messages/send
Content-Type: application/json
X-API-Key: {{apiKey}}

{
  "phoneNumber": "+1234567890"
}

### Test Without API Key (should fail auth if API_KEY is set)
POST {{baseUrl}}/api/messages/send
Content-Type: application/json

{
  "phoneNumber": "+1234567890",
  "message": "This should fail without API key"
}
